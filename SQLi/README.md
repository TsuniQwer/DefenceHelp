
# Существует несколько способов защититься от SQL Injection на сайте PHP:

## 1. Использование подготовленных запросов (Prepared Statements): Вместо непосредственного вставления пользовательского ввода в SQL запрос, вы можете использовать подготовленные запросы с параметрами. Это позволяет базе данных автоматически эскейпировать пользовательский ввод и предотвратить SQL Injection.

Пример использования подготовленного запроса с параметрами в PHP PDO:
```php
$sql = "SELECT * FROM users WHERE username = :username AND password = :password";
$stmt = $pdo->prepare($sql);
$stmt->bindParam(':username', $username);
$stmt->bindParam(':password', $password);
$stmt->execute();
```



## 2. Фильтрация и валидация пользовательского ввода: Применяйте фильтрацию и валидацию к пользовательскому вводу, прежде чем использовать его в SQL запросах. Для этого можно использовать функции, такие как `filter_var()` и `htmlspecialchars()`.

Пример фильтрации и эскейпирования:
```php
$username = filter_var($_POST['username'], FILTER_SANITIZE_STRING);
$password = htmlspecialchars($_POST['password'], ENT_QUOTES);
```

## 3. Использование Escape функций: Экранируйте специальные символы во входящих данных с помощью соответствующих функций, таких как `mysqli_real_escape_string()` или `PDO::quote()`. Однако, следует отметить, что escape функции не всегда являются достаточной мерой защиты и требуют правильной настройки кодировки.

Пример использования mysqli_real_escape_string():
```php
$username = mysqli_real_escape_string($connection, $_POST['username']);
$password = mysqli_real_escape_string($connection, $_POST['password']);
$sql = "SELECT * FROM users WHERE username = '$username' AND password = '$password'";
$result = mysqli_query($connection, $sql);
```

## 4. Ограничение привилегий базы данных: При подключении к базе данных, следует использовать пользователя с ограниченными привилегиями вместо пользователя с полными правами. Это поможет предотвратить возможность изменения структуры таблиц или выполнения опасных запросов.

## 5. Обновление и использование обновлений фреймворка и библиотек: Регулярно обновляйте используемые фреймворки и библиотеки, так как разработчики постоянно работают над исправлением уязвимостей, включая SQL Injection.

## 6. Тщательное тестирование: Проводите тщательное тестирование вашего кода, чтобы выявить возможные уязвимости. В том числе, тестирование на возможность выполнения SQL инъекций с помощью передачи специальных символов и кодов.

## Обратите внимание, что ни один способ защиты не является 100% надежным. Рекомендуется использовать несколько способов защиты одновременно и обратиться к профессионалам, если вы не уверены в своих навыках безопасного программирования.


https://habr.com/ru/articles/148701/
